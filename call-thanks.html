<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø§ØªØµØ§Ù„ - Ø´Ø±ÙƒØ© Ø§Ù„Ø­Ø¨ÙŠØ¨ Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù†Ø§Ø²Ù„</title>
  <meta name="description" content="Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ§ØµÙ„Ùƒ Ù…Ø¹Ù†Ø§ ÙÙŠ Ø´Ø±ÙƒØ© Ø§Ù„Ø­Ø¨ÙŠØ¨ Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù†Ø§Ø²Ù„. Ø¬Ø§Ø±ÙŠ ØªØ­ÙˆÙŠÙ„Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <link rel="canonical" href="https://elhbebclean.github.io/Elhabib_clean_home/call-thanks.html">

  <!-- ØªØ¹Ø±ÙŠÙ Ù…Ø¨ÙƒØ± Ù„Ù„Ù€ dataLayer -->
  <script>window.dataLayer = window.dataLayer || [];</script>

  <!-- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØµÙØ­Ø© -->
  <script>
    (function(){
      function getParam(name) {
        try { return (new URL(window.location.href)).searchParams.get(name); } catch(e) { return null; }
      }

      // Ø´Ø±Ø· 1: Ø¨Ø§Ø±Ø§Ù…ÙŠØªØ± src=callbtn
      var srcOk = getParam('src') === 'callbtn';

      // Ø´Ø±Ø· 2: referrer Ù…Ù† Ù†ÙØ³ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† ÙˆØ¬Ø§ÙŠ Ù…Ù† Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      var refOk = false;
      try {
        if (document.referrer) {
          var refUrl = new URL(document.referrer);
          var sameHost = (refUrl.hostname === location.hostname);
          var path = refUrl.pathname || '/';
          // Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ø¯ÙŠÙƒ Ø¥Ù…Ø§ index.html Ø£Ùˆ Ø§Ù„Ø¬Ø°Ø± /Elhabib_clean_home/
          var isHome = /index\.html$/i.test(path) || /\/Elhabib_clean_home\/?$/i.test(path);
          refOk = sameHost && isHome;
        }
      } catch(e){ refOk = false; }

      // Ø´Ø±Ø· 3: ÙÙ„Ø§Ø¬ ÙÙŠ Ø§Ù„Ø³ÙŠØ´Ù† Ø³ØªÙˆØ±ÙŠØ¯Ø¬ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹)
      var ssOk = false;
      try { ssOk = sessionStorage.getItem('from_call_btn') === '1'; } catch(e){}

      // Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: Ù„Ø§Ø²Ù… ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
      window.__eligible_for_conversion = !!(srcOk || refOk || ssOk);
    })();
  </script>

  <!-- Ø³ÙƒØ±Ø¨Øª Ù‡Ø§Ø´ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙˆØ¯ÙØ¹Ù‡ Ù„Ù„Ù€ dataLayer (Enhanced Conversions) -->
  <script>
    (function(){
      function getParam(name) {
        try { return (new URL(window.location.href)).searchParams.get(name); } catch(e) { return null; }
      }

      // Ù†Ù„ØªÙ‚Ø· ?phone= Ø£Ùˆ Ù…Ù† sessionStorage
      var phone = getParam('phone') || null;
      try {
        if (!phone && sessionStorage.getItem) {
          phone = sessionStorage.getItem('userPhone') || null;
        }
      } catch(e){}

      if (!phone) { window.customerPhone = null; return; }

      phone = String(phone).replace(/\D+/g,'').trim();
      if (!phone) { window.customerPhone = null; return; }
      window.customerPhone = phone;

      async function sha256Hex(s){
        const enc = new TextEncoder().encode(String(s));
        const buf = await crypto.subtle.digest('SHA-256', enc);
        return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2,'0')).join('');
      }

      (async function pushHash(){
        try {
          const phoneHash = await sha256Hex(phone);
          window.dataLayer.push({
            'event': 'enhanced_conv_ready',
            'user_data': { 'phone_number': phoneHash }
          });
          try { sessionStorage.setItem('userPhone', phone); } catch(e){}
        } catch(err) {
          console.warn('Failed to push enhanced conv data', err);
        }
      })();
    })();
  </script>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];
      w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
      j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KLM4RMFM');
  </script>

  <!-- Google Ads gtag -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-16529004339"></script>
  <script>
    function gtag(){window.dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-16529004339');
  </script>

  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 40px; background-color: #f9f9f9; }
    h1 { color: #28a745; font-size: 28px; }
    p { font-size: 18px; margin-bottom: 20px; }
    a.map-link { display: inline-block; margin-top: 25px; font-size: 18px; color: #007bff; text-decoration: underline; }
    a.call-now { display: inline-block; margin-top: 30px; font-size: 18px; color: white; background: #28a745; padding: 12px 25px; border-radius: 6px; text-decoration: none; }
  </style>
</head>
<body>
  <!-- GTM noscript -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLM4RMFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <h1>âœ… Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ§ØµÙ„Ùƒ Ù…Ø¹Ù†Ø§!</h1>
  <p>Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ø§Ù„Ø¢Ù† Ù„Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø± Ø¨Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù Ù‚Ù„ÙŠÙ„Ø©.</p>

  <a id="fallbackCall" href="tel:01016961497" class="call-now">ğŸ“ Ø§Ø¶ØºØ· Ù„Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¢Ù†</a>

  <h2 style="margin-top: 40px;">ğŸ“ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Google Maps</h2>
  <a href="https://maps.app.goo.gl/wkatbwKjdm4J5vp48" target="_blank" class="map-link">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„ÙØªØ­ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Google Maps Ù…Ø¨Ø§Ø´Ø±Ø©</a>

  <script>
    (async function sendConversionAndCall(){
      try {
        // Ù„Ùˆ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØµÙØ­Ø© ØºÙŠØ± Ù…Ø¤Ù‡Ù„ Ù…Ø§ Ù†Ø¨Ø¹ØªØ´ Ø¥Ø­Ø§Ù„Ø©
        if (!window.__eligible_for_conversion) {
          console.warn('Visit not eligible for conversion (opened directly or from unknown source).');
          // Ù…Ø§ ÙÙŠØ´ ØªØ­ÙˆÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØŒ Ù†Ø®Ù„ÙŠ Ø§Ù„Ø²Ø§Ø¦Ø± ÙŠØ³ØªØ®Ø¯Ù… Ø²Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙŠØ¯ÙˆÙŠ
          return;
        }

        function getGclid(){
          try {
            const p = (new URL(window.location.href)).searchParams.get('gclid');
            if (p){ document.cookie = "gclid=" + p + "; path=/; max-age=" + 60*60*24*90; return p; }
            const m = document.cookie.match(new RegExp('(^| )gclid=([^;]+)'));
            return m ? m[2] : null;
          } catch(e) { return null; }
        }
        const gclid = getGclid();

        const conversionLabel = 'OIQ7COaD0ewaELOu0sk9';
        const sendTo = 'AW-16529004339/' + conversionLabel;

        function findLatestUserData(){
          try {
            const dl = window.dataLayer || [];
            for (let i = dl.length - 1; i >= 0; i--) {
              if (dl[i] && dl[i].user_data && dl[i].user_data.phone_number) return dl[i].user_data;
            }
          } catch(e){}
          return null;
        }

        const phone = window.customerPhone || null;
        const dlUser = findLatestUserData();
        const eventObj = { 'send_to': sendTo, 'value': 100.00, 'currency': 'EGP' };

        if (dlUser && dlUser.phone_number) {
          eventObj.user_data = { 'phone_number': dlUser.phone_number };
          if (gclid) eventObj.user_data.gclid = gclid;
        } else if (phone) {
          try {
            const enc = new TextEncoder().encode(String(phone));
            const buf = await crypto.subtle.digest('SHA-256', enc);
            const h = Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
            eventObj.user_data = { 'phone_number': h };
            if (gclid) eventObj.user_data.gclid = gclid;
          } catch(e){}
        }

        if (window.__conversion_sent) return;
        window.__conversion_sent = true;

        let redirected = false;
        const doRedirect = function(){ if (!redirected) { redirected = true; window.location.href = "tel:01016961497"; } };
        const fbTimer = setTimeout(doRedirect, 6000);

        gtag('event', 'conversion', Object.assign({}, eventObj, {
          'event_callback': function() { clearTimeout(fbTimer); doRedirect(); }
        }));

      } catch(err) {
        console.warn('conversion send failed', err);
        try { window.location.href = "tel:01016961497"; }catch(e){}
      }
    })();
  </script>
</body>
</html>
