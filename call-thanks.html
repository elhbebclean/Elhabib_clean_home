<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø§ØªØµØ§Ù„ - Ø´Ø±ÙƒØ© Ø§Ù„Ø­Ø¨ÙŠØ¨ Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù†Ø§Ø²Ù„</title>
  <meta name="description" content="Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ§ØµÙ„Ùƒ Ù…Ø¹Ù†Ø§ ÙÙŠ Ø´Ø±ÙƒØ© Ø§Ù„Ø­Ø¨ÙŠØ¨ Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù†Ø§Ø²Ù„. Ø¬Ø§Ø±ÙŠ ØªØ­ÙˆÙŠÙ„Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <link rel="canonical" href="https://elhbebclean.github.io/Elhabib_clean_home/call-thanks.html">

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];
      w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;
      j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KLM4RMFM');
  </script>
  <!-- End Google Tag Manager -->

  <!-- Google Ads Conversion Tracking -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-16529004339"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-16529004339');
  </script>

  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 40px; background-color: #f9f9f9; }
    h1 { color: #28a745; font-size: 28px; }
    p { font-size: 18px; margin-bottom: 20px; }
    a.map-link { display: inline-block; margin-top: 25px; font-size: 18px; color: #007bff; text-decoration: underline; }
    a.call-now { display: inline-block; margin-top: 30px; font-size: 18px; color: white; background: #28a745; padding: 12px 25px; border-radius: 6px; text-decoration: none; }
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLM4RMFM"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <h1>âœ… Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ§ØµÙ„Ùƒ Ù…Ø¹Ù†Ø§!</h1>
  <p>Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ø§Ù„Ø¢Ù† Ù„Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø± Ø¨Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù Ù‚Ù„ÙŠÙ„Ø©.</p>

  <!-- Ø²Ø± Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙÙŠ Ø­Ø§Ù„ Ù„Ù… ÙŠØ¹Ù…Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ -->
  <a id="fallbackCall" href="tel:01016961497" class="call-now">ğŸ“ Ø§Ø¶ØºØ· Ù„Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¢Ù†</a>

  <h2 style="margin-top: 40px;">ğŸ“ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Google Maps</h2>
  <a href="https://maps.app.goo.gl/wkatbwKjdm4J5vp48" target="_blank" class="map-link">
    Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„ÙØªØ­ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Google Maps Ù…Ø¨Ø§Ø´Ø±Ø©
  </a>

  <!-- Ø¹Ù†ØµØ± HTML Ù…Ø®ÙÙŠ ÙŠØ­ÙˆÙŠ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø³ÙŠÙÙ…Ù„Ø£ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§) -->
  <span id="customer-phone" style="display:none"></span>

  <script>
    /***********************
     * 1) Ø§Ù„ØªÙ‚Ø§Ø· Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ Ù…Ù†:
     *    - query param ?phone=
     *    - sessionStorage 'userPhone' (Ø¥Ù† ÙˆÙØ¬Ø¯)
     *    - (fallback Ù„Ø§ Ù†Ø³ØªØ®Ø¯Ù…Ù‡ ÙƒÙ€ user_data)
     ***********************/
    (function(){
      function getParam(name) {
        try {
          return (new URL(window.location.href)).searchParams.get(name);
        } catch (e) {
          return null;
        }
      }

      var phone = null;

      // Ù…Ù† Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø© ?phone=
      phone = getParam('phone') || phone;

      // Ù…Ù† sessionStorage (Ù„Ùˆ Ø®Ø²Ù‘Ù†ØªÙ‡ Ù…Ù† ØµÙØ­Ø© Ø³Ø§Ø¨Ù‚Ø©)
      try {
        if (!phone && sessionStorage.getItem('userPhone')) {
          phone = sessionStorage.getItem('userPhone');
        }
      } catch(e){}

      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø±Ù‚Ù… (Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·) ÙˆÙƒØªØ§Ø¨Ø© DOM + Ù…ØªØºÙŠØ± Ù†Ø§ÙØ°Ø©
      if (phone) {
        phone = String(phone).replace(/\D+/g, '');
        if (phone.length > 0) {
          document.getElementById('customer-phone').textContent = phone;
          window.customerPhone = phone;
          try { sessionStorage.setItem('userPhone', phone); } catch(e){}
        } else {
          document.getElementById('customer-phone').textContent = '';
          window.customerPhone = null;
        }
      } else {
        document.getElementById('customer-phone').textContent = '';
        window.customerPhone = null;
      }
    })();

    /***********************
     * 2) Ø¯Ø§Ù„Ø© SHA-256 (ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)
     ***********************/
    async function sha256Digits(message) {
      if (!message) return null;
      const digitsOnly = String(message).replace(/\D+/g, '').trim().toLowerCase();
      if (!digitsOnly) return null;
      const msgBuffer = new TextEncoder().encode(digitsOnly);
      const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }

    /***********************
     * 3) Ø§Ù„ØªÙ‚Ø§Ø· gclid ÙˆØªØ®Ø²ÙŠÙ†Ù‡ ÙÙŠ ÙƒÙˆÙƒÙŠØ² Ø¥Ù† ÙˆØ¬Ø¯
     ***********************/
    function getGclid() {
      try {
        const p = (new URL(window.location.href)).searchParams.get('gclid');
        if (p) {
          document.cookie = "gclid=" + p + "; path=/; max-age=" + 60*60*24*90;
          return p;
        } else {
          const match = document.cookie.match(new RegExp('(^| )gclid=([^;]+)'));
          return match ? match[2] : null;
        }
      } catch(e) {
        return null;
      }
    }

    /***********************
     * 4) Ø¥Ø±Ø³Ø§Ù„ conversion (Ù…Ø¹ user_data ÙÙ‚Ø· Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯ phoneHash)
     *    Ø«Ù… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„Ù„Ø§ØªØµØ§Ù„ (fallback Ø¨Ø¹Ø¯ 6s)
     ***********************/
    (async function sendConversionAndCall(){
      try {
        const phone = window.customerPhone; // Ù‚Ø¯ ØªÙƒÙˆÙ† null
        const gclid = getGclid();

        // Ù„Ø§ Ù†Ø³ØªØ®Ø¯Ù… Ø±Ù‚Ù… Ø§Ù„Ø´Ø±ÙƒØ© ÙƒÙ€ user_data â€” ÙÙ‚Ø· ÙƒÙ€ redirect fallback
        const phoneHash = phone ? await sha256Digits(phone) : null;

        // ØºÙŠÙ‘Ø± Ø§Ù„Ù€ conversionLabel Ø¥Ù† ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù… Ù‚ÙŠÙ…Ø© Ù…Ø®ØªÙ„ÙØ© ÙÙŠ Ø­Ø³Ø§Ø¨Ùƒ
        const conversionLabel = 'OIQ7COaD0ewaELOu0sk9';
        const sendTo = 'AW-16529004339/' + conversionLabel;

        // Ø¨Ù†Ø§Ø¡ Ø­Ø¯Ø« Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ø¯ÙˆÙ† user_data Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
        const eventObj = {
          'send_to': sendTo,
          'value': 100.00,
          'currency': 'EGP'
        };

        // Ø£Ø¶Ù user_data ÙÙ‚Ø· Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ phoneHash ØµØ§Ù„Ø­ (SHA-256 hex)
        if (phoneHash) {
          eventObj.user_data = { 'phone_number': phoneHash };
          if (gclid) eventObj.user_data.gclid = gclid;
        } else if (gclid) {
          // Ø§Ø®ØªÙŠØ§Ø±ÙŠØ§Ù‹ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ gclid ÙÙ‚Ø·ØŒ Ù„ÙƒÙ† Ø§Ù„Ø£ÙØ¶Ù„ Ø£Ù† ÙŠØªØ±Ø§ÙÙ‚ Ù…Ø¹ user_data
          // eventObj.user_data = { 'gclid': gclid };
        }

        // Ù…Ù†Ø¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬
        if (window.__conversion_sent) return;
        window.__conversion_sent = true;

        // redirect fallback after 6s
        let redirected = false;
        const doRedirect = function(){
          if (!redirected) {
            redirected = true;
            window.location.href = "tel:01016961497";
          }
        };
        const fbTimer = setTimeout(doRedirect, 6000);

        // Ø£Ø±Ø³Ù„ Ø§Ù„Ø­Ø¯Ø« Ø¹Ø¨Ø± gtag
        gtag('event', 'conversion', Object.assign({}, eventObj, {
          'event_callback': function() {
            clearTimeout(fbTimer);
            doRedirect();
          }
        }));

      } catch (err) {
        console.warn('conversion send failed', err);
        // Ù„Ùˆ ÙØ´Ù„ Ø´ÙŠØ¡ â€” Ù†Ø¹ÙŠØ¯ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙÙˆØ±Ø§Ù‹
        try { window.location.href = "tel:01016961497"; } catch(e){}
      }
    })();
  </script>
</body>
</html>
